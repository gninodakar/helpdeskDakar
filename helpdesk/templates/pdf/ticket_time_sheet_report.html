<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Report</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: white;
        position: relative;
      }

      /* Letter size simulation */
      .letter-container {
        width: 100%;
        height: 1220px;
        margin: 0 auto;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        position: relative;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
      }

      /* Header styles */
      .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 20px;
      }

      .logo {
        width: 250px;
        margin-bottom: 20px;
      }

      .address {
        text-align: right;
        font-size: 12px;
        line-height: 1.3;
      }

      /* Main content styles */
      h1 {
        color: #0a0a0a;
        margin-top: 0;
        font-size: 16px;
      }

      h2 {
        color: #5b72a0;
        margin-top: 10px;
        font-size: 25px;
      }

      p {
        font-size: 12px;
        margin: 5px 0;
      }

      /* Modern table styles with rounded corners */
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 1;
        margin: 15px 0;
        font-size: 11px;
        border-radius: 5px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      th {
        background: rgb(195, 200, 204);
        color: rgb(26, 25, 25);
        padding: 12px 8px;
        text-align: left;
        font-weight: 600;
        font-size: 11px;
      }

      td {
        padding: 10px 8px;
        border-bottom: 1px solid #c2bcbc;
        text-align: left;
      }

      tr:last-child td {
        border-bottom: none;
      }

      tr:nth-child(even) {
        background-color: #f8f9fa;
      }

      tr:hover {
        background-color: #e3f2fd;
        transition: background-color 0.2s ease;
      }

      /* Rounded corners for table */
      th:first-child {
        border-top-left-radius: 5px;
      }

      th:last-child {
        border-top-right-radius: 5px;
      }

      tr:last-child td:first-child {
        border-bottom-left-radius: 5px;
      }

      tr:last-child td:last-child {
        border-bottom-right-radius: 5px;
      }

      /* Two-column footer styles */
      .footer-container {
        width: 100%;
        position: absolute;
        bottom: 0in;
        border-top: 1px solid #a9aeb4;
        padding-top: 8px;
        font-size: 11px;
        color: #626568;
      }

      .footer-columns {
        display: flex;
        justify-content: space-between;
      }

      .footer-column {
        flex: 1;
      }

      .footer-column:first-child {
        text-align: left;
      }

      .footer-column:last-child {
        text-align: right;
      }

      .footer-item {
        margin: 2px 0;
      }

      /* Watermark styles */
      .watermark {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -1; /* Behind content */
        pointer-events: none; /* Doesn't interfere with clicks */
        background-image: url({{logo_url}});
        background-repeat: no-repeat;
        background-position: center;
        background-size: 600px auto;
        opacity: 0.1; /* Make it subtle but visible */
      }

      /* Ensure content doesn't overlap with footer */
      .content {
        margin-bottom: 50px;
      }
    </style>
  </head>
  <body>
    <div class="letter-container">
      <!-- Watermark -->
      <div class="watermark"></div>

      <!-- Header -->
      <div class="header">
        <img src="{{logo_url}}" alt="Dakar Logo" class="logo" />
        <div class="address">
          Dakar Software Systems<br />
          Level 4 Dakar Buildings<br />
          Triq Henry Calleja<br />
          San Giljan STJ 1390<br />
          Malta
        </div>
      </div>

      <!-- Main Content -->
      <div class="content">
        <h1>Ticket:[{{ticket_id}}] {{ticket_subject}}</h1>
        <h2>Timesheets</h2>

        <p><strong>CUSTOMER: {{customer_name}} </strong></p>

        <table>
          <thead>
            <tr>
              <th>DATE</th>
              <th>EMPLOYEE</th>
              <th>TYPE OF EVENT</th>
              <th>DESCRIPTION</th>
              <th>TIME SPENT</th>
            </tr>
          </thead>
          <tbody>
            {% for entry in timesheet_entries %}
            <tr>
              <td>{{ entry.tts_event_date }}</td>
              <td>{{ entry.tts_agent }}</td>
              <td>{{ entry.tts_event_type }}</td>
              <td>{{ entry.tts_event_description }}</td>
              <td>{{ entry.tts_event_duration }}</td>
            </tr>
            {% else %}
            <tr>
              <td colspan="5" class="text-center">
                No time sheet entries found
              </td>
            </tr>
            {% endfor %}

            <tr>
              <td colspan="4" style="text-align: right">
                <strong>Total (Hours)</strong>
              </td>
              <td><strong>{{total_time_spent |default('00:00')}}</strong></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Two-column Footer -->
      <div class="footer-container">
        <div class="footer-columns">
          <div class="footer-column">
            <p class="footer-item"><strong>CONTACT INFORMATION:</strong></p>
            <p class="footer-item">Telephone: +356 2137 4078</p>
            <p class="footer-item">Email: support@dakarsoftware.com</p>
            <p class="footer-item">Website: http://dakarsoftware.com</p>
          </div>
          <div class="footer-column">
            <p class="footer-item"><strong>COMPANY DETAILS:</strong></p>
            <p class="footer-item">Vat number: MT10102012</p>
            <p class="footer-item">Page 1 / 1</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
